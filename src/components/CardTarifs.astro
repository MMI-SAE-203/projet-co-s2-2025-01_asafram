---
const {
  titre,
  description,
  icone,
  prix,
  btnText,
  features = [],
  bgColor = "bg-white",
  titleColor = "text-terre-cuite",
  textColor = "text-gris",
  labelColor = "text-black",
  iconBgColor = "bg-saumon",
  btnBgColor = "bg-terre-cuite",
  btnTextColor = "text-white",
  fillIcone = "fill-current",
  checkColor = "",
  crossColor = "",
  isMiddle = false,
  showPopular = false,
} = Astro.props;
import iconCheck from "../assets/icones/icone-check.svg";
import iconCroix from "../assets/icones/icone-croix.svg";
---

<div
  class={`mx-auto p-4 sm:p-5 md:p-6 lg:p-10 ${bgColor} rounded-3xl shadow-lg border border-transparent transition-all duration-500 hover:shadow-xl hover:translate-y-[-8px] hover:border-terre-cuite w-[280px] sm:w-[270px] md:w-[220px] lg:w-[300px] xl:w-[380px] ${isMiddle ? "md:transform md:scale-105 md:z-10" : ""} relative h-auto`}
>
  {
    showPopular && (
      <div class="absolute -top-3 right-5 md:top-2 md:right-2 lg:top-4 lg:right-4">
        <div class="bg-white bg-opacity-20 rounded-lg px-2 md:px-3 py-1">
          <p class="text-white text-xs font-medium uppercase">Populaire</p>
        </div>
      </div>
    )
  }
  <div class="flex gap-2 md:gap-3 lg:gap-4 w-full">
    <div
      class={`flex justify-between items-center ${iconBgColor} rounded-2xl p-2 lg:p-3 mb-2 md:mb-3 w-10 md:w-12 lg:w-16`}
    >
      <img
        src={icone.src}
        alt=`icone de la carte ${titre}`
        class="w-6 md:w-8 lg:w-12"
      />
    </div>
    <div>
      <p class={`${textColor} text-[10px] md:text-xs`}>Pour les boutiques</p>
      <p class={`${titleColor} font-bold text-base md:text-lg lg:text-xl`}>
        {titre}
      </p>
    </div>
  </div>
  <p class={`text-[10px] md:text-xs lg:text-sm ${textColor} mt-1 md:mt-2`}>
    {description}
  </p>
  <p
    class={`my-2 md:my-3 lg:my-4 ${titleColor} text-sm md:text-base lg:text-lg font-bold`}
  >
    {prix}
  </p>
  <div>
    <p
      class={`text-[10px] md:text-xs lg:text-sm font-bold ${titleColor} mb-1 md:mb-2 lg:mb-3`}
    >
      Avantages
    </p>
    <ul class="mt-1 md:mt-2 space-y-0.5 md:space-y-1 lg:space-y-2">
      {
        features.map(
          (f: { label: string; included: boolean }, index: number) => (
            <li class="flex items-start gap-1 md:gap-1.5 lg:gap-2 text-[10px] md:text-xs lg:text-sm">
              {f.included ? (
                <div class={checkColor}>
                  <img
                    src={iconCheck.src}
                    alt="Icone check"
                    class={`w-3 md:w-4 lg:w-auto ${fillIcone}`}
                  />
                </div>
              ) : (
                <div class={crossColor}>
                  <img
                    src={iconCroix.src}
                    alt="Icone non inclus"
                    class="w-3 md:w-4 lg:w-auto"
                  />
                </div>
              )}
              <span
                class={f.included ? labelColor : "line-through text-gray-400"}
              >
                {f.label}
              </span>
            </li>
          )
        )
      }
    </ul>
  </div>
  <div class="position-center mt-3 md:mt-4 lg:mt-6">
    <a
      href=""
      class={`${btnBgColor} ${btnTextColor} px-4 sm:px-6 md:px-8 lg:px-16 py-1.5 sm:py-2 md:py-2.5 lg:py-3 rounded-4xl uppercase transition-all duration-300 hover:opacity-90 font-bold text-[10px] sm:text-xs md:text-sm lg:text-base`}
      >{btnText}</a
    >
  </div>
</div>
